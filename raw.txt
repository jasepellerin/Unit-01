units:
  halfKeyWidth: 0.5 cx
  halfKeyHeight: 0.5 cy
  paddingX: 1
  paddingY: 1
  pinkyRotate: 5
  ringRotate: -5
  indexRotate: -2
  innerRotate: -2
  thumbRotate: -10
  thumbFarRotate: -4
points:
  key:
   padding: cy
   footprints:
     choc_hotswap:
      type: choc
      nets:
       from: =column_net
       to: GND
      params:
        keycaps: true
        reverse: true
        hotswap: true
     choc:
      type: choc
      anchor:
       rotate: 180
      nets:
       from: =column_net
       to: GND
      params:
        keycaps: true
        reverse: true
  zones:
    matrix:
      rows:
        bottom:
        home:
        top:
      columns:
        pinky:
          rotate: pinkyRotate
          rows:
            top:
              skip: true
        ring:
          rotate: ringRotate
          stagger: 6.75
          spread: 20.75
        middle:
          stagger: 3
          spread: 20
        index:
          rotate: indexRotate
          stagger: -4
          spread: 22.25
        inner:
          spread: 20.25
          stagger: -1
          rotate: innerRotate
    thumbfan:
      anchor:
        ref: matrix_inner_bottom
        shift: [-7, -19]
      columns:
        home:
          rotate: thumbRotate
          spread: 11.25
          stagger: -2.25
        far:
          rotate: thumbFarRotate
          spread: 20.5
          stagger: -.5
      rows:
        thumb:
outlines:
  exports:
    raw:
      main:
        type: keys
        side: left
        size: [cx + paddingX, cy + paddingY]
        corner: 2 * paddingX
    thumbfan_glue:
      main:
        type: polygon
        points:
          - ref: matrix_inner_bottom
            shift: [halfKeyWidth + paddingX, -halfKeyHeight + paddingY]
          - ref: thumbfan_far_thumb
            shift: [halfKeyWidth - paddingX, halfKeyHeight + paddingY]
          - ref: thumbfan_far_thumb
            shift: [halfKeyWidth - paddingX, -halfKeyHeight - paddingY]
          - ref: matrix_pinky_bottom
            shift: [-halfKeyWidth, -halfKeyHeight -0.4 paddingX]
          - ref: matrix_pinky_home
            shift: [-halfKeyWidth, 0]
          - ref: matrix_inner_home
    key_cap_outlines:
      main:
        type: keys
        side: left
        size: [1cx - 0.5, 1cy - 0.5] # Choc keycaps are 17.5 x 16.5
        bound: false
    controller_area:
      main:
        type: rectangle
        anchor:
          ref:
            - thumbfan_far_thumb
          shift: [-1 cx, 0]
          rotate: 10
        size: [32, 76.5]
        corner: 2 * paddingX
    switches:
      main:
        type: keys
        side: left
        size: 14
        bound: false
    keycaps:
      main:
        type: keys
        side: left
        size: [cx, cy]
        bound: false
        corner: paddingX
    backing:
      main:
        type: polygon
        points:
          - ref: matrix_inner_bottom
            shift: [halfKeyWidth + paddingX, -halfKeyHeight - paddingX]
          - ref: matrix_pinky_bottom
            shift: [-halfKeyWidth - paddingX, -halfKeyHeight - paddingX]
          - ref: matrix_pinky_home
            shift: [-halfKeyWidth - paddingX, halfKeyHeight + paddingX]
          - ref: matrix_middle_top
            shift: [-halfKeyWidth - paddingX, halfKeyHeight + paddingX]
          - ref: matrix_middle_top
            shift: [halfKeyWidth + paddingX, halfKeyHeight + paddingX]
          - ref: matrix_inner_top
            shift: [halfKeyWidth + paddingX, halfKeyHeight + paddingX]
    keywell:
      main:
        type: outline
        name: raw
      thumbfan_glue:
        type: outline
        name: thumbfan_glue
        operation: add
      backing:
        type: outline
        name: backing
        operation: add
    base_outline:
      main:
        type: outline
        name: keywell
      controller:
        type: outline
        name: controller_area
        operation: add